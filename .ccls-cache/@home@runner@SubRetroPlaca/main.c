/* mbed Microcontroller Library
 * Copyright (c) 2019 ARM Limited
 * SPDX-License-Identifier: Apache-2.0
 */



/* 
Substituição Retroativa

Autores: Jhonny Leite, Carlos Henrique

Este programa foi escrito no contexto de uma atividade avaliativa na disciplina de Sistemas embarcados, entregue ao Instituto Federal do Ceará. 24/11/2023.

O funcionamento se dá pela leitura de uma matriz triangular superior com uma coluna adicional de termos independentes, retornando um array com os valores das variáveis descobertas. Inicialmente feito para a plataforma linux, agora foi adaptado para ser executado em um sistema embarcado, especificamente o STM32F030R8. Para mudar a matriz, basta comentar o array que está sendo usado no momento e descomentar outro array, ou criar um novo array para testar. Também é necessário alterar a variável TAM para o número de linhas do novo array.

Todos os direitos reservados.

*/
#include "mbed.h"

Serial pc(USBTX, USBRX);  // Configurar a interface serial USB

// Número de linhas 
#define TAM 3 

/*const double matriz[44][45] =   {
    { 0.6088, 0.1123, 0.1043, 0.6828, 0.5611, 0.2156, 0.8413, 0.7071, 0.269, 0.9082, 0.0307, 0.0756, 0.9794, 0.18, 0.3784, 0.8322, 0.8104, 0.0049, 0.0489, 0.8001, 0.5339, 0.9356, 0.7081, 0.3804, 0.0853, 0.009, 0.4332, 0.6018, 0.2388, 0.4186, 0.111, 0.2988, 0.0532, 0.1205, 0.4074, 0.3886, 0.7212, 0.6129, 0.0814, 0.6701, 0.5051, 0.5672, 0.9135, 0.4383, 0.0991 },
{ 0.0, 0.754, 0.9215, 0.8012, 0.484, 0.9711, 0.4464, 0.6866, 0.2661, 0.0594, 0.5704, 0.3449, 0.1552, 0.0225, 0.2006, 0.0439, 0.3137, 0.6021, 0.2696, 0.4184, 0.1631, 0.7253, 0.1204, 0.8685, 0.3096, 0.3117, 0.7346, 0.4878, 0.6795, 0.115, 0.1259, 0.3475, 0.6997, 0.6953, 0.3737, 0.5896, 0.0772, 0.9449, 0.3408, 0.1837, 0.9505, 0.4719, 0.0895, 0.9221, 0.6864 },
{ 0.0, 0.0, 0.9351, 0.2673, 0.2377, 0.1862, 0.303, 0.0706, 0.9166, 0.1137, 0.7818, 0.6867, 0.018, 0.0177, 0.4239, 0.734, 0.0954, 0.7349, 0.9971, 0.9542, 0.7364, 0.9211, 0.6609, 0.7272, 0.6572, 0.5337, 0.0533, 0.5553, 0.4033, 0.8844, 0.1127, 0.282, 0.6216, 0.0583, 0.5263, 0.4763, 0.0145, 0.2441, 0.7182, 0.3249, 0.0719, 0.6168, 0.1729, 0.6776, 0.8132 },
{ 0.0, 0.0, 0.0, 0.4518, 0.0703, 0.2705, 0.6081, 0.12, 0.6235, 0.141, 0.6025, 0.8363, 0.4087, 0.1447, 0.997, 0.9784, 0.0664, 0.6822, 0.7876, 0.9793, 0.3846, 0.4422, 0.805, 0.7758, 0.1637, 0.085, 0.8179, 0.397, 0.7241, 0.3849, 0.2712, 0.8084, 0.9548, 0.0271, 0.1788, 0.7352, 0.4714, 0.6304, 0.7504, 0.8042, 0.323, 0.0746, 0.54, 0.8083, 0.7885 },
{ 0.0, 0.0, 0.0, 0.0, 0.0024, 0.0781, 0.2319, 0.9422, 0.447, 0.595, 0.3718, 0.789, 0.3934, 0.1782, 0.6781, 0.5083, 0.2639, 0.2202, 0.781, 0.52, 0.1272, 0.3182, 0.5759, 0.1193, 0.9601, 0.1307, 0.6458, 0.3848, 0.8362, 0.6071, 0.0417, 0.5808, 0.786, 0.5265, 0.525, 0.111, 0.776, 0.0845, 0.3392, 0.5775, 0.6938, 0.3793, 0.2153, 0.2468, 0.1353 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.8257, 0.4922, 0.3372, 0.4709, 0.7902, 0.2067, 0.2643, 0.4132, 0.3827, 0.5466, 0.6293, 0.4478, 0.7, 0.9322, 0.5568, 0.5033, 0.7765, 0.9162, 0.1669, 0.6632, 0.798, 0.1056, 0.8796, 0.2371, 0.8233, 0.3341, 0.0762, 0.7198, 0.9963, 0.8762, 0.1803, 0.768, 0.4085, 0.1258, 0.2682, 0.496, 0.9233, 0.5688, 0.6214, 0.5221 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.2654, 0.7901, 0.1683, 0.1275, 0.8985, 0.4283, 0.9612, 0.4753, 0.3494, 0.7416, 0.3484, 0.5471, 0.4154, 0.0189, 0.9027, 0.5066, 0.4035, 0.0281, 0.1372, 0.9391, 0.6727, 0.3086, 0.9697, 0.2108, 0.1121, 0.8232, 0.7473, 0.1879, 0.8377, 0.3463, 0.6668, 0.4314, 0.5112, 0.1143, 0.2347, 0.5051, 0.5476, 0.8113, 0.3289 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.9384, 0.8647, 0.7528, 0.6914, 0.3753, 0.1093, 0.7695, 0.0381, 0.063, 0.5949, 0.7431, 0.3497, 0.346, 0.5709, 0.3492, 0.1396, 0.1096, 0.2248, 0.3429, 0.4516, 0.1765, 0.0394, 0.9443, 0.0204, 0.2658, 0.9953, 0.0053, 0.226, 0.1395, 0.5147, 0.1213, 0.7474, 0.4873, 0.0004, 0.3703, 0.8269, 0.0765, 0.8137 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.4693, 0.4439, 0.9354, 0.7713, 0.0363, 0.5702, 0.3126, 0.8568, 0.884, 0.6492, 0.7981, 0.1213, 0.5253, 0.2386, 0.0971, 0.5106, 0.6898, 0.4352, 0.1359, 0.2618, 0.1875, 0.1327, 0.3625, 0.3626, 0.8468, 0.4395, 0.745, 0.2927, 0.4244, 0.2983, 0.4738, 0.1862, 0.3347, 0.8859, 0.5015, 0.6044, 0.087 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.6864, 0.2169, 0.4877, 0.7954, 0.0818, 0.4729, 0.7077, 0.9703, 0.9928, 0.2924, 0.6122, 0.426, 0.3213, 0.389, 0.6855, 0.7196, 0.861, 0.0327, 0.455, 0.1053, 0.8497, 0.3974, 0.0302, 0.2314, 0.9404, 0.6235, 0.6862, 0.6223, 0.7439, 0.2817, 0.2769, 0.0964, 0.4799, 0.6575, 0.3101, 0.2315 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.3679, 0.232, 0.5458, 0.6302, 0.4858, 0.7009, 0.3434, 0.3803, 0.1069, 0.6574, 0.2701, 0.8598, 0.1083, 0.8492, 0.3429, 0.9931, 0.6193, 0.134, 0.5425, 0.5325, 0.1252, 0.9608, 0.3249, 0.9602, 0.9882, 0.215, 0.2916, 0.8634, 0.7223, 0.3776, 0.9459, 0.2186, 0.8815, 0.5422, 0.6143 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.8019, 0.7006, 0.6521, 0.2407, 0.2854, 0.6558, 0.3388, 0.7629, 0.2127, 0.4844, 0.2796, 0.5279, 0.9288, 0.2853, 0.8149, 0.1604, 0.1847, 0.1548, 0.3735, 0.631, 0.9393, 0.5449, 0.7546, 0.0116, 0.1809, 0.701, 0.7973, 0.7277, 0.5149, 0.6335, 0.6111, 0.5029, 0.8361, 0.477 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.4992, 0.9362, 0.8974, 0.6611, 0.2038, 0.5517, 0.3224, 0.9925, 0.3824, 0.5175, 0.5587, 0.1948, 0.9183, 0.5199, 0.6174, 0.0347, 0.9629, 0.1243, 0.3892, 0.1693, 0.1447, 0.4776, 0.3868, 0.2119, 0.1768, 0.0914, 0.0308, 0.1077, 0.5541, 0.4179, 0.518, 0.5852, 0.44 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.4084, 0.0153, 0.388, 0.9598, 0.3934, 0.6939, 0.7832, 0.1105, 0.2307, 0.4517, 0.0173, 0.2845, 0.4734, 0.9845, 0.6072, 0.0727, 0.1442, 0.345, 0.8594, 0.2473, 0.9068, 0.5051, 0.1878, 0.0663, 0.9115, 0.4788, 0.9475, 0.6485, 0.4149, 0.3139, 0.8045, 0.8844 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.4627, 0.0071, 0.3586, 0.4843, 0.0709, 0.7511, 0.6441, 0.3751, 0.2466, 0.8491, 0.7824, 0.4994, 0.5559, 0.4953, 0.9079, 0.3484, 0.1381, 0.2155, 0.6564, 0.1992, 0.1842, 0.6725, 0.4262, 0.1213, 0.4061, 0.7225, 0.9196, 0.4452, 0.7179, 0.0187, 0.4203 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.4736, 0.3075, 0.4638, 0.9888, 0.1361, 0.4003, 0.5097, 0.9486, 0.3695, 0.328, 0.7459, 0.5034, 0.6655, 0.6116, 0.4286, 0.1312, 0.498, 0.2455, 0.0399, 0.9932, 0.9755, 0.6137, 0.3262, 0.6843, 0.7094, 0.4787, 0.449, 0.773, 0.7778, 0.8865 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.5792, 0.7402, 0.0928, 0.9638, 0.4438, 0.3393, 0.8031, 0.6195, 0.0942, 0.2704, 0.7821, 0.8446, 0.81, 0.2649, 0.308, 0.2701, 0.8763, 0.6106, 0.8467, 0.7412, 0.8029, 0.6728, 0.0943, 0.3796, 0.365, 0.0101, 0.3851, 0.5925, 0.9186 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.2745, 0.1283, 0.1752, 0.871, 0.3017, 0.0245, 0.3164, 0.4501, 0.0005, 0.3649, 0.9612, 0.0482, 0.1415, 0.3236, 0.5422, 0.9515, 0.9165, 0.3504, 0.382, 0.4474, 0.5308, 0.5236, 0.0319, 0.0053, 0.5465, 0.0167, 0.4455, 0.016 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.3964, 0.9998, 0.337, 0.358, 0.3969, 0.2724, 0.0375, 0.4035, 0.2244, 0.0187, 0.7798, 0.9338, 0.3704, 0.7133, 0.6632, 0.0398, 0.7349, 0.6715, 0.9726, 0.0656, 0.319, 0.8832, 0.6302, 0.4596, 0.3154, 0.7587, 0.851 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.8178, 0.6313, 0.6081, 0.0816, 0.4203, 0.2844, 0.1646, 0.59, 0.9546, 0.2494, 0.8717, 0.5321, 0.4926, 0.4314, 0.6873, 0.7463, 0.0065, 0.3539, 0.8847, 0.6572, 0.3017, 0.8789, 0.9964, 0.864, 0.3923, 0.7131 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.6056, 0.7084, 0.4855, 0.7298, 0.5514, 0.1276, 0.6851, 0.3036, 0.8289, 0.131, 0.1146, 0.9066, 0.8289, 0.4913, 0.2161, 0.5826, 0.3053, 0.6631, 0.6097, 0.1022, 0.8138, 0.4868, 0.0085, 0.8269, 0.8094 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.5053, 0.3967, 0.305, 0.1242, 0.9586, 0.8378, 0.2321, 0.639, 0.7185, 0.8641, 0.7291, 0.2709, 0.5215, 0.4084, 0.7445, 0.6275, 0.8085, 0.1024, 0.6127, 0.3702, 0.5574, 0.5931, 0.2223, 0.8393 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.4099, 0.2724, 0.4713, 0.9497, 0.4236, 0.2595, 0.8964, 0.8555, 0.179, 0.437, 0.4206, 0.9373, 0.7956, 0.5918, 0.2236, 0.9146, 0.6278, 0.6211, 0.5237, 0.7449, 0.6911, 0.3271, 0.1652 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.731, 0.6356, 0.8275, 0.8342, 0.7703, 0.8882, 0.8519, 0.9999, 0.6297, 0.6999, 0.2121, 0.0898, 0.3571, 0.7717, 0.2632, 0.3759, 0.241, 0.2717, 0.9214, 0.181, 0.3326, 0.1892 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.6859, 0.9572, 0.4792, 0.9501, 0.205, 0.4439, 0.2515, 0.7941, 0.9106, 0.491, 0.1804, 0.6238, 0.3633, 0.6778, 0.5073, 0.4575, 0.6207, 0.4176, 0.953, 0.222, 0.5193 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.5469, 0.9029, 0.8131, 0.3391, 0.8343, 0.2896, 0.2065, 0.4005, 0.8481, 0.8643, 0.7741, 0.712, 0.1163, 0.2409, 0.1987, 0.9456, 0.8944, 0.9327, 0.1442, 0.3779 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.3062, 0.7051, 0.0644, 0.2567, 0.0943, 0.1629, 0.6097, 0.3067, 0.4502, 0.0015, 0.5888, 0.8457, 0.2659, 0.7658, 0.4527, 0.5225, 0.9328, 0.0549, 0.373 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0087, 0.3702, 0.0325, 0.3959, 0.0674, 0.9507, 0.202, 0.1306, 0.1709, 0.4982, 0.6023, 0.8147, 0.9354, 0.4408, 0.2408, 0.7836, 0.0345, 0.536 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0008, 0.9323, 0.0869, 0.198, 0.8719, 0.4316, 0.4513, 0.367, 0.0861, 0.9816, 0.3323, 0.2591, 0.1062, 0.9218, 0.9001, 0.8493, 0.0516 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.8412, 0.1897, 0.9045, 0.5548, 0.2904, 0.2456, 0.1822, 0.4299, 0.6922, 0.7106, 0.7142, 0.9697, 0.446, 0.3178, 0.6202, 0.3388 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.4678, 0.3416, 0.7366, 0.3433, 0.9965, 0.7847, 0.7974, 0.8743, 0.9966, 0.391, 0.284, 0.9047, 0.1556, 0.1004, 0.6599 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.537, 0.4701, 0.6715, 0.4065, 0.6594, 0.3813, 0.2848, 0.0309, 0.7127, 0.9458, 0.7148, 0.4797, 0.6281, 0.2951 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.7593, 0.1527, 0.9313, 0.3347, 0.7147, 0.0737, 0.556, 0.0343, 0.2693, 0.4026, 0.1655, 0.373, 0.9249 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.7415, 0.2301, 0.1496, 0.8444, 0.5781, 0.8196, 0.1637, 0.5854, 0.955, 0.9824, 0.7207, 0.5232 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.3213, 0.5011, 0.5594, 0.9768, 0.3653, 0.2714, 0.4307, 0.8144, 0.8004, 0.7522, 0.1482 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0473, 0.0238, 0.3118, 0.7801, 0.6653, 0.7905, 0.6307, 0.9454, 0.2653, 0.3564 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.1572, 0.2162, 0.9443, 0.4409, 0.9416, 0.2474, 0.4574, 0.6672, 0.9478 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.2753, 0.3728, 0.4394, 0.3883, 0.4186, 0.2984, 0.7336, 0.7802 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.2896, 0.0781, 0.7336, 0.914, 0.0341, 0.5936, 0.5122 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.4817, 0.7545, 0.6561, 0.7826, 0.451, 0.8977 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.6123, 0.6196, 0.5496, 0.7762, 0.4752 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.773, 0.29, 0.9995, 0.4356 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.2451, 0.3126, 0.9481 },
{ 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.2879, 0.7689 },
};*/
/*const double matriz[5][6] = {{ 0.1527, 0.8471, 0.4658, 0.6524, 0.62, 0.518 },
{ 0.0, 0.2385, 0.8815, 0.0142, 0.6565, 0.5403 },
{ 0.0, 0.0, 0.7156, 0.7975, 0.879, 0.0178 },
{ 0.0, 0.0, 0.0, 0.4145, 0.8247, 0.0392 },
{ 0.0, 0.0, 0.0, 0.0, 0.163, 0.258 },};*/


/*const double matriz[3][4] = {{ 1,  1,  1,  0 },
{ 0,  1,  1,  0 },
{ 0,  0,  1,  0 },};*/


/*const double matriz[3][4] = {{ 1, 0, 0, 3 },
{ 0, 1, 0, 2 },
{ 0, 0, 1, 1 },};*/


const double matriz[3][4] = {{ -1, -1, -1, 3 }, // Matriz de testes
{ 0, -1, -1, 2 },
{ 0, 0, -1, 1 },};

double termosInd[TAM]; // Espaço dos termos independentes
double x[TAM]; // Espaço dos resultados



void my_printf(const char *format, ...) { // Função para printar valores via serial
    va_list args;
    va_start(args, format);
    char buffer[256];  // Tamanho do buffer 
    vsnprintf(buffer, sizeof(buffer), format, args);
    va_end(args);
    pc.printf(buffer);  // Redireciona a saída para a interface serial USB
}

void retrosubstituicao() { // Função que realiza o cálculo das variáveis
  // Variáveis auxiliares
  int i, j; // Auxiliares para percorrer arrays
  double sum;
  int l; // Auxiliar para percorrer array


    my_printf("Matriz:\n");
    for (int l = 0; l < TAM; l++) { // Mostra a matriz de coeficientes
        for (int c = 0; c < TAM; c++) {
            my_printf("%.2f ", matriz[l][c]);
        }
        my_printf("\n");
    }
    my_printf("Começou a retro\n");

    for (int i = TAM - 1; i >= 0; i--) {  // Percorre a matriz de baixo para cima.
        double sum = 0.0; // Soma das variáveis já descobertas
        for (int j = i + 1; j < TAM; j++) { // Percorre a linha da diag. principal em diante.
            sum += matriz[i][j] * x[j];
        }
        x[i] = (termosInd[i] - sum) / matriz[i][i]; // Cálculo da variável atual, os resultados descobertos vão para o outro lado da igualdade com o sinal oposto.
      // A variável que vai ser descoberta em cada linha sempre será a da diagonal principal, por isso seu coeficiente(matriz[i][i]) passa para o outro lado dividindo.
        my_printf("%lf\n", x[i]);
    }
    my_printf("Aqui foi\n");
}



int main() {
    double x[TAM]; // Reservado para os resultados

    int l = 0; // Contador para mostrar os termos independentes
    my_printf("Termos independentes:\n");
    for ( l = 0; l < TAM; l++) { 
        termosInd[l] = matriz[l][TAM]; // Armazena os termos independentes em outro local
        my_printf("%lf\n",termosInd[l]); // Mostra os termos independentes
    }
    my_printf("\n");


    retrosubstituicao(); // Executa o algoritmo

}